{% extends "base.html" %}

{% block title %}音乐教师音频社区{% endblock %}

{% block content %}
    <!-- 主横幅 -->
    <section class="py-20 px-6">
        <div class="max-w-3xl mx-auto text-center">
            <h1 class="text-5xl font-medium text-primary mb-4">音乐教学资源平台</h1>
            <p class="text-xl text-secondary mb-8">获取高质量教学音频与课件，分享你的创作</p>
            <div class="flex justify-center gap-4">
                <a href="#audio-library" class="btn-primary" style="padding: 10px 24px;">开始探索</a>
                <a href="#" class="btn-secondary" style="padding: 10px 24px;">了解更多</a>
            </div>
        </div>
    </section>

    <div class="divider"></div>

    <!-- 音频库 -->
    <section id="audio-library" class="py-16 px-6">
        <div class="max-w-6xl mx-auto">
            <div class="mb-8">
                <h2 class="text-2xl font-medium text-primary mb-2">音频库</h2>
                <p class="text-secondary">精选管弦乐分轨音频资源</p>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4" id="trackGrid">
                <!-- 曲目卡片将由JS动态生成 -->
            </div>

            <div class="mt-8 text-center">
                <a href="{{ url_for('library') }}" class="btn-secondary">查看全部音频</a>
            </div>
        </div>
    </section>

    <div class="divider"></div>

    <!-- 课件中心 -->
    <section id="courseware" class="py-16 px-6 bg-gray-50">
        <div class="max-w-6xl mx-auto">
            <div class="max-w-2xl">
                <h2 class="text-2xl font-medium text-primary mb-2">课件中心</h2>
                <p class="text-secondary mb-6">专业的音乐教学课件，助力课堂教学</p>
                <a href="#" class="btn-primary">浏览课件</a>
            </div>
        </div>
    </section>

    <!-- 创作者中心 -->
    <section id="creator" class="py-16 px-6">
        <div class="max-w-6xl mx-auto">
            <div class="max-w-2xl">
                <h2 class="text-2xl font-medium text-primary mb-2">创作者中心</h2>
                <p class="text-secondary mb-6">上传并分享你的音乐教学资源</p>
                <a href="#" class="btn-primary">开始创作</a>
            </div>
        </div>
    </section>

    <div class="divider"></div>
{% endblock %}

{% block extra_js %}
    <script>
        // 平滑滚动
        document.querySelectorAll('a[href^="#"]').forEach(function(anchor) {
            anchor.addEventListener('click', function(e) {
                e.preventDefault();
                var target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({ behavior: 'smooth' });
                }
            });
        });

        // 加载曲目数据并渲染
        loadTracks().then(function() {
            renderTrackList('trackGrid', 'all', 'track');
        }).catch(function(error) {
            console.error('加载曲目数据失败:', error);
            document.getElementById('trackGrid').innerHTML = 
                '<p class="text-secondary col-span-3 text-center py-8">加载曲目数据失败，请刷新页面重试</p>';
        });
    </script>
{% endblock %}
